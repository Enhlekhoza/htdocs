(function ($) {
    "use strict";
    $(document).ready(function () {

        /*
       Jquery Mobile Menu
       ============================*/
        $('#main-menu').meanmenu({
            meanMenuContainer: '.mobile-nav-menu',
            meanScreenWidth: "1199",
            meanExpand: ['<i class="fal fa-plus"></i>'],
        });
         $('#main-menu-two').meanmenu({
            meanMenuContainer: '.mobile-nav-menu',
            meanScreenWidth: "1280",
            meanExpand: ['<i class="fal fa-plus"></i>'],
        });

        /*
       Jquery Sidebar Toggle
       ============================*/
        $(".mobile-menu-toggle-btn").on("click", function (e) {
            e.preventDefault();
            $(".menu-sidebar-area").addClass("active");
            $(".body-overlay").addClass("active");
        });
        $(".menu-sidebar-close-btn").on("click", function () {
            $(".menu-sidebar-area").removeClass("active");
            $(".body-overlay").removeClass("active");
        });

        /*
       Jquery Body Overlay
       ============================*/
        $(".body-overlay").on("click", function () {
            $(".menu-sidebar-area").removeClass("active");
            $(".body-overlay").removeClass("active");
        });

        /*
        Bubble Class Append 
        ============================*/
        $(".bubble").append('<span></span><span></span><span></span><span></span>');
        $(".bubble-yellow").append('<span></span><span></span><span></span><span></span>');
        $(".bubble-white").append('<span></span><span></span><span></span><span></span>');
        $(".bubble-green").append('<span></span><span></span><span></span><span></span>');
        $("<p class=\"typewrite form-title\" data-period=\"1500\" data-type='[\"DONATION\",\"DONATE TODAY\",\"MAKE DONATE\"]'><span class=\"wrap\">DONATE TODAY</span></p>").insertAfter(".give-form-title");


        /*
        Typing animation 
        ============================*/
        
        var TxtType = function(el, toRotate, period) {
        this.toRotate = toRotate;
        this.el = el;
        this.loopNum = 0;
        this.period = parseInt(period, 10) || 2000;
        this.txt = '';
        this.tick();
        this.isDeleting = false;
    };

    TxtType.prototype.tick = function() {
        var i = this.loopNum % this.toRotate.length;
        var fullTxt = this.toRotate[i];

        if (this.isDeleting) {
        this.txt = fullTxt.substring(0, this.txt.length - 1);
        } else {
        this.txt = fullTxt.substring(0, this.txt.length + 1);
        }

        this.el.innerHTML = '<span class="wrap">'+this.txt+'</span>';

        var that = this;
        var delta = 200 - Math.random() * 100;

        if (this.isDeleting) { delta /= 2; }

        if (!this.isDeleting && this.txt === fullTxt) {
        delta = this.period;
        this.isDeleting = true;
        } else if (this.isDeleting && this.txt === '') {
        this.isDeleting = false;
        this.loopNum++;
        delta = 500;
        }

        setTimeout(function() {
        that.tick();
        }, delta);
    };

    window.onload = function() {
        var elements = document.getElementsByClassName('typewrite');
        for (var i=0; i<elements.length; i++) {
            var toRotate = elements[i].getAttribute('data-type');
            var period = elements[i].getAttribute('data-period');
            if (toRotate) {
              new TxtType(elements[i], JSON.parse(toRotate), period);
            }
        }
        // INJECT CSS
        var css = document.createElement("style");
        css.type = "text/css";
        css.innerHTML = ".typewrite > .wrap { border-right: 0.08em solid #FFFFFF}";
        document.body.appendChild(css);
    };


        /*
        Stikey Js
        ============================*/
        const body = document.body;
        const html = document.documentElement;
        const height = Math.max(body.scrollHeight, body.offsetHeight, html.clientHeight, html.scrollHeight, html.offsetHeight);

        if( height  > 1400 ) {
            const nav = $(".header-menu-area.sticky-header");
            let scrolled = false;
            $(window).scroll(function () {
                if (160 < $(window).scrollTop() && !scrolled) {
                    nav
                        .addClass("sticky_menu animated fadeIn")
                        .animate({"margin-top": "0px"});
                    scrolled = true;
                }
                if (160 > $(window).scrollTop() && scrolled) {
                    nav.removeClass("sticky_menu animated fadeIn").css("margin-top", "0px");
                    scrolled = false;
                }
            });
        }

        /*
        Jquery Empty Post Content Hide
        ============================*/
        $('.blog-area .post-content p').filter(function() {
            return /\u00A0/.test($(this).text());
        }).hide();


        /*
        Skill Progress Bar Js
        ============================*/
        $('.causes-area, .donate-area').each(function() {
        let section = $(this);
        section.one('inview', function(event, isInView) {
            if (isInView) {
                section.find('.progress-inner').each(function() {
                    $(this).find('.progress-content').animate({
                        width: $(this).attr('data-percentage')
                    }, 2000);
                    $(this).find('.progress-number-count').animate(
                        {
                            left: $(this).attr('data-percentage')
                        },
                        {
                            duration: 2000,
                            step: function(now) {
                                let data = Math.round(now);
                                $(this).find('.progress-percent').html(data + '%');
                            }
                        });
                    });
                }
            });
        });
        
        $('#trigger_testimonial_prev').on('click', function() {
            $('.testimonial-slider-wrapper .prev-btn').trigger('click');
        });
        $('#trigger_testimonial_next').on('click', function() {
            $('.testimonial-slider-wrapper .next-btn').trigger('click');
        });

        $('#trigger_testimonial_prev').on('click', function() {
            $('.testimonial-slider-wrapper .prev-btn').trigger('click');
        });
        $('#trigger_testimonial_next').on('click', function() {
            $('.testimonial-slider-wrapper .next-btn').trigger('click');
        });

        /*
       Donor Slider
       ============================*/
        $(".donors_slider").slick({
            slidesToShow: 3,
            infinite: true,
            autoplay: true,
            draggable: true,
            arrows: true,
            slidesToScroll: 1,
            loop: true,
            swipeToSlide: true,
            dots: false,
            speed: 1500,
            prevArrow: "<button type='button' class='donor-slider-btn prev-btn'><i class='fa-solid fa-angle-left'></i></button>",
            nextArrow: "<button type='button' class='donor-slider-btn next-btn'><i class='fa-solid fa-angle-right'></i></button>",
            responsive: [
                {
                    breakpoint: 1023,
                    settings: {
                    slidesToShow: 2,
                    },
                },
                {
                    breakpoint: 767,
                    settings: {
                        slidesToShow: 1,
                    },
                },
            ],
        });
                            
        // Process Step Slider Tab
        $('.testimonial-user-wrapper').slick({
            slidesToShow: 9,
            slidesToScroll: 3,
            loop: false,
            infinite: false,
            asNavFor: '#testimonial_one',
            dots: true,
            centerMode: true,
            focusOnSelect: true,
            arrows:false,
            draggable: false,
        });
          
        $('.testimonial-user-wrapper').each(function() {
            const item = $(this).find('.single-user');
            item.on('mouseenter', function() {
                $(this).trigger('click');
            });
        });
        
        // Lang-btn click handler
        $(".lang-select").click(function(){
            $(".lang-menu").toggleClass("dropdown");
          });

        // donate-form
         const defaultValue = "$100";
            $("#donate-input-field").val(defaultValue);
            $(".value.active").removeClass("active");
            $(".value:contains(" + defaultValue + ")").addClass("active");
            $(".value").click(function () {
                $(".value").removeClass("active");
                $(this).addClass("active");
                const selectedValueText = $(this).text();
                $("#donate-input-field").val(selectedValueText);
            });

            $("#custom-amount").click(function (e) {
                e.preventDefault();
                $("#donate-input-field").focus();
                $(".value").removeClass("active");
                return false;
            });

            // Donation- Details : Donate Form
             const defaultValue2 = "$250";
            $("#donate-input-field2").val(defaultValue2);
            $(".value.active-field").removeClass("active-field");
            $(".value:contains(" + defaultValue2 + ")").addClass("active-field");
            $(".value").click(function () {
                $(".value").removeClass("active-field");
                $(this).addClass("active-field");
                const selectedValueText2 = $(this).text();
                $("#donate-input-field2").val(selectedValueText2);
            });

            $("#custom-amount").click(function (e) {
                e.preventDefault();
                $("#donate-input-field2").focus();
                $(".value").removeClass("active-field");
                return false;
            });

        /*
        Counter Js
        ============================*/
        $(".counter").counterUp({
            delay: 10,
            time: 1000,
        });

        /*
        breadcrumb class added
        ============================*/
        $(".breadcrumb-list ul li:last").addClass("active");

        /*
       Magnific Popup
       ============================*/
        $(".video-play").magnificPopup({
            disableOn: 700,
            type: "iframe",
            mainClass: "mfp-fade",
            removalDelay: 160,
            preloader: false,
            fixedContentPos: false,
        });

        /*
        Jquery Wow Js
        ============================*/
        new WOW().init();

        /*
       Jquery Nice Select Js
       ============================*/
        $('select.select_option, select.wpcf7-select').niceSelect();

        /*
       Jquery Tilt Js
       ============================*/
        $('.tilt-animate').tilt({
            maxTilt: 12,
            perspective: 1500,
        })

        /*
        Scroll To Top Js
        ============================*/
        $(function () {
            $("#scrollTop").hide();
            var position = $(window).scrollTop();
            var timer;
            $(window).on('scroll', function () {
                var scrollTop = $(window).scrollTop();
                clearTimeout(timer);
                if (scrollTop > 100) {
                    if (scrollTop > position) {
                        $('#scrollTop').fadeOut();
                    } else {
                        $('#scrollTop').fadeIn();
                        timer = window.setTimeout(function() {
                            $("#scrollTop").fadeOut();
                        }, 3000);
                    }
                    position = scrollTop;
                } else {
                    $('#scrollTop').fadeOut();
                }
            });
            $(".scrollup-btn").click(function() {
                $("html, body").animate({ scrollTop: 0 }, "slow");
                return false;
            });
        });

        /*
        Mouse Hover Effect
        =====================*/
        
        $("#about-us-area").mousemove(function(e) {
            $(".sketch-3").parallax(-10, e);
            $(".sketch-2").parallax(10, e);
            $(".icon-shape-2").parallax(-25, e);
            $(".icon-shape-1").parallax(-10, e);
            $(".icon-shape-3").parallax(10, e);
            $(".shape").parallax(-25, e);
            $(".shape-1").parallax(-25, e);
            $(".shape-2").parallax(25, e);
            $(".sketch-1").parallax(-25, e);
            $(".sketch-4").parallax(-25, e);
        });
        $("#slider-area").mousemove(function(e) {
            $(".sketch-2").parallax(-25, e);
            $(".sketch-4").parallax(-25, e);
            $(".top-shape").parallax(20, e);
            $(".bottom-shape").parallax(-10, e);
            $(".bottom-shape2").parallax(-10, e);
        });
        $(".contact-info-area").mousemove(function(e) {
            $(".feature-image").parallax(15, e);
        });
        $(".page-breadcrumb-area").mousemove(function(e) {
            $(".feature-shape2").parallax(-10, e);
            $(".feature-shape1").parallax(5, e);
        });
        $(".page-area").mousemove(function(e) {
            $(".feature-image").parallax(-10, e);
            $(".feature-image-2").parallax(-10, e);
            $(".feature-image-3").parallax(-10, e);
        });
        $(".donor-wall-area").mousemove(function(e) {
            $(".feature-icon1").parallax(-10, e);
            $(".feature-icon2").parallax(10, e);
        });
        $(".counter-area").mousemove(function(e) {
            $(".feature-image1").parallax(-10, e);
            $(".feature-image2").parallax(10, e);
        });
        $("#causes-area").mousemove(function(e) {
            $(".feature-shape").parallax(-10, e);
            $(".feature-image-1").parallax(-10, e);
             $(".shape-1").parallax(-10, e);
        });
        $("#event-area").mousemove(function(e) {
            $("#sketch-1").parallax(-10, e);
            $("#sketch-2").parallax(10, e);
        });
        $("#event-slider").mousemove(function(e) {
            $(".shape-1").parallax(-10, e);
        });
        $("#testimonial-slider-area").mousemove(function(e) {
            $(".shape-1").parallax(-10, e);
            $(".shape-2").parallax(10, e);
            $(".shape-3").parallax(10, e);
            $(".feature-shape-1").parallax(10, e);
        });
        $("#team-slider-area").mousemove(function(e) {
            $(".feature-item3").parallax(-10, e);
            $(".feature-shape").parallax(-10, e);
            $(".feature-shape2").parallax(-10, e);
        });
        $(".blog-area ").mousemove(function(e) {
            $(".shape-1").parallax(-10, e);
            $(".shape-2").parallax(10, e);
            $(".shape-3").parallax(10, e);
            $(".shape-4").parallax(10, e);
        });
        $(".latest-posts-area ").mousemove(function(e) {
            $(".feature-shape-1").parallax(-10, e);
            $(".feature-shape-2").parallax(-10, e);
        });
        $("#donation-area").mousemove(function(e) {
            $(".shape1").parallax(-10, e);
            $(".shape2").parallax(10, e);
        });
        $(".testimonial-slider-area").mousemove(function(e) {
            $(".top-feature-icon").parallax(-10, e);
        });
         $(".newsletter-area").mousemove(function(e) {
            $(".sketch-2").parallax(-10, e);
        });
         $(".newsletter-area").mousemove(function(e) {
            $(".sketch-2").parallax(-10, e);
        });
         $(".faq-area").mousemove(function(e) {
            $(".feature-shape").parallax(-10, e);
            $(".feature-shape2").parallax(10, e);
            $(".feature-shape3").parallax(-15, e);
        });
        $(".process-step-slider-area").mousemove(function(e) {
            $(".feature-icon1").parallax(-10, e);
            $(".feature-icon2").parallax(10, e);
        });

        /*
        Preloader
        ============================*/
        $(window).on("load", function () {
            $("#preloader").fadeOut();
            $("#preloader-status").delay(200).fadeOut("slow");
            $("body").delay(200).css({"overflow-x": "hidden"});
        });

    });
})(jQuery);
